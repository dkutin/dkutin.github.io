# Cyclical Dependency Detection

There aren't many 'real-world' examples that we as software developers encounter on a daily basis, but I'd found this an interesting application of DFS.

![Graph representation of a cyclical dependency among three courses](cyclical-dependencies.png)
*Graph representation of a cyclical dependency among three courses.*

## Problem

A while ago, I was working on a course dependency feature, where a content author should be able to specify that `Course 1` needs to be completed before `Course 2`, and so on.

Consider the following:

1. `Course 1` is a dependency of `Course 2`
2. `Course 2` is a dependency of `Course 3`
3. `Course 3` is a dependency of `Course 1` (!)

This creates a **cyclical dependency**.

In a real-world system, there could be hundreds of courses with multiple dependencies, making it difficult for users to identify cycles manually. We need an automated way to detect these cycles when a course is created or updated, adding validation to prevent this configuration.

Cyclical dependencies can impact the student experience in a variety of ways:
- Prevent users from completing courses
- Lock the system in an invalid state
- Cause confusion for content authors

## Solution

What we need is a **cycle detection algorithm** to determine if adding a dependency creates a cycle.

We can use a modified **Depth-First Search (DFS)** algorithm to detect cycles efficiently. Since this validation is run when the course is saved, we can use a 'fixed' point & fail early if the current depth >= # of Courses (Noting that when equal, the set must include our starting node):
1. When a course is saved, perform a DFS for all its dependencies.
2. Maintain a counter for the depth level.
3. If the depth level exceeds the total number of courses, a cycle exists.

### Complexity

This approach has a time complexity of **O(|V|)**, where `V` is the number of vertices (courses). By focusing only on the modified course, we avoid unnecessary checks, saving time and resources.
